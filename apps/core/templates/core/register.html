<!DOCTYPE html>
<html>
<head>
    <title>Registro - Django Tenancy</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 50px; }
        .container { max-width: 400px; margin: 0 auto; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; }
        input[type="text"], input[type="email"], input[type="password"] {
            width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;
        }
        button { background: #28a745; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; }
        button:hover { background: #218838; }
        .error { color: red; margin-bottom: 10px; }
        .help { font-size: 12px; color: #666; margin-top: 5px; }
    </style>
</head>
<body>
    <div class="container">
        <h2>Criar Nova Organização</h2>
        <p>Ao se registrar, você criará uma nova organização com seu próprio subdomínio.</p>
        
        {% if form.non_field_errors %}
            <div class="error">
                {% for error in form.non_field_errors %}
                    {{ error }}
                {% endfor %}
            </div>
        {% endif %}
        
        <form method="post">
            {% csrf_token %}
            
            <div class="form-group">
                <label for="{{ form.username.id_for_label }}">Usuário:</label>
                {{ form.username }}
                {% if form.username.errors %}
                    <div class="error">{{ form.username.errors }}</div>
                {% endif %}
            </div>
            
            <div class="form-group">
                <label for="{{ form.email.id_for_label }}">Email:</label>
                {{ form.email }}
                {% if form.email.errors %}
                    <div class="error">{{ form.email.errors }}</div>
                {% endif %}
            </div>
            
            <div class="form-group">
                <label for="{{ form.organization.id_for_label }}">Nome da Organização:</label>
                {{ form.organization }}
                {% if form.organization.errors %}
                    <div class="error">{{ form.organization.errors }}</div>
                {% endif %}
                <div class="help">{{ form.organization.help_text }}</div>
                <div class="help">Seu subdomínio será: <strong id="subdomain-preview">suaorganizacao.localhost:8000</strong></div>
            </div>
            
            <div class="form-group">
                <label for="{{ form.password1.id_for_label }}">Senha:</label>
                {{ form.password1 }}
                {% if form.password1.errors %}
                    <div class="error">{{ form.password1.errors }}</div>
                {% endif %}
            </div>
            
            <div class="form-group">
                <label for="{{ form.password2.id_for_label }}">Confirmar Senha:</label>
                {{ form.password2 }}
                {% if form.password2.errors %}
                    <div class="error">{{ form.password2.errors }}</div>
                {% endif %}
            </div>
            
            <button type="submit">Criar Organização</button>
        </form>
        
        <p>Já tem uma organização? <a href="{% url 'core:login' %}">Faça login</a></p>
    </div>
    
    <script>
        document.getElementById('id_organization').addEventListener('input', function(e) {
            const value = e.target.value.toLowerCase().replace(/[^a-z0-9]/g, '');
            document.getElementById('subdomain-preview').textContent = value + '.localhost:8000';
        });
    </script>
</body>
</html>
